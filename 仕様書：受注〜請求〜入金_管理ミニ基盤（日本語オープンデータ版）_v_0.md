# 仕様書：受注〜請求〜入金 管理ミニ基盤（日本語オープンデータ版）

版：v0.1 / 作成日：2025-12-21 / 想定：ポートフォリオ兼デモ用

## 1. 概要
少人数チーム（制作会社・メディア運営・小規模事業者）の「管理のカオス」を解消する。
従来の管理台帳との違いは、**「入力の手間」と「確認の手間」を極限までゼロにする**点にある。

## 1.1 コンセプト（Why This Product?）

**「締めの不安を、週1回の確認だけで済む状態にする」**

| 従来の課題（カオス）                                         | 本プロダクトの解決策                                               | 技術的アプローチ（How）                                                                            |
| ------------------------------------------------------------ | ------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------- |
| **入力が面倒**<br>（結局後回しになり、台帳が陳腐化する）     | **入力の手間ゼロ**<br>「ログインしたら既に台帳が出来上がっている」 | **Open Data Integration**<br>国の調達データを「自社の受注」と見立て、自動連携の世界観を再現。      |
| **確認が大変**<br>（アラートが出ても、契約書を探し回る）     | **確認の手間ゼロ**<br>「なぜ期限超過か？根拠は？」がその場で見える | **RAG (Retrieval-Augmented Generation)**<br>契約書や発注書を自動検索し、判断の根拠を引用表示する。 |
| **判断が難しい**<br>（リストを見ても、次に何かが分からない） | **考えるコスト削減**<br>「今週やるべきこと」だけを教えてくれる     | **LLM (Large Language Model)**<br>状況を要約し、次アクション（督促/請求）を提案する。              |

## 1.2 ポートフォリオとしての狙い

求人要件（Python/ETL、生成AI、Databricks等）に対し、単なるツール機能の実装にとどまらず、**「業務課題（Input/Checkコスト）を技術でどう解決するか」** というエンジニアリングの視点を示す。

| 求人の要件                                        | 本プロダクトで見せる要素                                 | 具体（成果物/画面/コード）                                            |
| ------------------------------------------------- | -------------------------------------------------------- | --------------------------------------------------------------------- |
| Pythonでのデータ分析システム構築（ETL設計・開発） | 取得→正規化→KPI→例外検知のパイプライン                   | pipelines/（取得・増分更新） + dbt（bronze/silver/gold） + CIログ     |
| 生成AIを用いたアプリ開発                          | 週次レポート生成（要点3つ）/カテゴリ推定                 | S5 週次レポート + 8.4 LLM（数値はDB、文章化のみ）                     |
| AIエージェント作成                                | “締め作業エージェント”として次アクション提案（任意）     | 例外→原因候補→ToDo化（S5/S4）＋（任意でツール実行）                   |
| Databricksでのシステム構築                        | Lakehouse思想の再現（メダリオン/ジョブ/品質/ガバナンス） | bronze/silver/gold + dbt tests + GitHub Actions（日次） + 根拠SQL表示 |
| （RAG要素）非構造化データ活用                     | 契約/発注書/社内ルール等の引用付き回答（任意）           | 8.5 RAG + S7 文書 + docs_* テーブル                                   |

## 1.3 差別化戦略（既存実績との棲み分け）

**「台帳を守る」から「台帳が回る」へ**

既存の実績（運用ルールの厳格化・入力バリデーション）に対し、本プロダクトは **別軸の価値（自動化・知能化）** を提示する。

| 差別化の柱                              | 既存のアプローチ（守り）                         | 本プロダクトのアプローチ（攻め）                               | ユーザーへのメッセージ                                                      |
| :-------------------------------------- | :----------------------------------------------- | :------------------------------------------------------------- | :-------------------------------------------------------------------------- |
| **1) 自動連携<br>（Input-less）**       | **入力ルールの厳格化**<br>人が正しく入力する前提 | **入力不要の自動更新**<br>国データ等から勝手に台帳が出来上がる | **「ちゃんと入力してね」**<br>↓<br>**「入力しなくても揃う」**               |
| **2) RAG<br>（Evidence-based）**        | **ステータスの担保**<br>項目としての正しさを重視 | **判断根拠の提示**<br>契約書等を引用し、なぜそうなのかを示す   | **「人に聞かないと分からない」**<br>↓<br>**「画面で即、根拠込みで分かる」** |
| **3) LLM Agent<br>（Action-oriented）** | **ミスの防止**<br>誤入力や抜け漏れを防ぐ         | **次アクションの生成**<br>例外から「次にやるべき仕事」を作る   | **「見える化して終わり」**<br>↓<br>**「手が動くところまで伴走」**           |


## 2. 目的と非目的

**目的（解決する課題）**

1.  **「入力コスト」の解消**:
    *   外部データソース（オープンデータ）からの自動取り込みにより、手入力なしで「真実の表（台帳）」を構築する。
2.  **「確認コスト」の解消**:
    *   支払期限超過などの例外が発生した際、関連文書（契約書PDF等）を探し回ることなく、画面上で即座に「判断の根拠」を確認可能にする。
3.  **「属人化」の解消**:
    *   「あの件、どうなってる？」という会話をなくし、ダッシュボードを見れば全員が同じ状況を把握できる状態にする。

**非目的（スコープ外）**

*   会計ソフト（freee/MF）への仕訳連携（今回は「管理」にフォーカス）
*   電子契約機能の実装
*   個人情報の扱い（公開情報＋生成データのみで構成）

**非目的（MVPではやらない）**

- 会計ソフト等への本番連携（freee / MF等）
- 電子署名・電子契約の実装
- 個人情報（顧客連絡先）を含む実データの扱い（デモは公開データ＋生成データに限定）

## 3. 想定ユーザー

プライマリ：非IT寄りの小規模事業の経営者・管理担当（兼務）

- 毎月の締め作業で、請求漏れ/入金漏れの不安がある
- スプレッドシート運用で限界、でも大掛かりなシステム導入はしたくない
- “誰か一人”に設計〜実装〜運用まで丸投げしたい

セカンダリ：制作/メディア/マーケ小チームのリーダー（スポンサー管理〜請求がカオス）

- 案件ステータスが分からず、催促や締めが属人化している
- 週次で状況を共有したいが、資料作成が負担

## 4. 投入データ（オープンデータ＋生成データ）

**4.1 オープンデータ（実在）**

- 調達ポータル「落札実績オープンデータ」（CSV/JSON、全件＋日次差分）
  - ダウンロードページ：https://www.p-portal.go.jp/pps-web-biz/UAB02/OAB0201
  - ファイル仕様（PDF）：https://www.p-portal.go.jp/pps-web-biz/resources/app/pdf/rakusatsuopendata.pdf
- 国税庁「法人番号公表サイト」基本3情報（名寄せ・所在地付与に使用）
  - 基本3情報ダウンロード：https://www.houjin-bangou.nta.go.jp/download/index.html
  - 法人番号システム Web-API：https://www.houjin-bangou.nta.go.jp/webapi/index.html
- （任意）e-Stat（政府統計API）：物価/賃金/人口などの統計を“背景”として表示（説得力の補強）
  - 利用ガイド：https://www.e-stat.go.jp/api/api-info/api-guide
  - APIの使い方：https://www.e-stat.go.jp/api/api-dev/how_to_use
- （任意）RESAS（地域経済分析）API：地域文脈（人口/産業/観光等）を補助的に利用
  - 利用登録：https://opendata.resas-portal.go.jp/form.html

**4.2 生成データ（デモ用に付与）**

- 請求書番号、請求日、支払条件（Net 30など）、支払期日
- 入金日、入金額（テスト用）

**4.3 RAG用サンプル文書セット（公式PDF＋生成PDF）**

狙い：RAGの価値（“文書の根拠を引用して答える”）を、個人情報なし・低コストで再現する。

A. 公式PDF（公開資料：そのまま投入してOK）

- 調達ポータル：落札実績オープンデータ「ファイル仕様PDF」
  - 用途：列定義・コード表・仕様の根拠提示（「この列は何？」に引用で回答）
  - 取得先：4.1に記載のURL
- （任意）調達ポータル関連の公開マニュアル/FAQ（PDF/HTML）
  - 用途：用語・手順の根拠提示（差分データの扱い、項目解釈など）
  - 取得先：4.1に記載のURL（ポータル内）

B. 生成PDF（デモ用：テンプレを作って投入・“デモ用に作成”と明記）

※RAGの“管理プロダクトらしさ（支払条件/検収/例外の原因）”を出すために追加する。

- 取引基本契約（テンプレ）PDF
  - 含める項目：支払サイト、検収条件、遅延損害金、請求締め日
  - 想定Q：『支払条件は？』『検収が必要？』『遅延時の扱いは？』
- 発注書（PO）PDF
  - 含める項目：発注番号、案件名、金額、納期、検収条件
  - 想定Q：『この案件の納期は？』『検収条件は？』
- 請求書（Invoice）PDF
  - 含める項目：請求番号、請求日、支払期日、請求内訳、振込先
  - 想定Q：『請求書の支払期日は？』『請求内訳は？』
- 社内ルール（締め・督促）PDF/テキスト
  - 含める項目：月末締め/翌月◯日送付、督促フロー、例外時の判断基準
  - 想定Q：『期限超過になったら誰が何をする？』『いつ督促する？』

C. 最小構成（RAGが成立する本数）

- まずは **2本** で成立：①公式のファイル仕様PDF ②社内ルール（締め・督促）PDF
- “管理っぽい対話”まで見せるなら **4本**：上記2本 + 発注書PDF + 請求書PDF

D. 文書メタデータ（投入時に付与する）

- doc_id：一意ID
- doc_type：contract / po / invoice / policy / spec / manual
- related_order_key：案件キー（受注台帳のキー）※任意
- vendor_name / vendor_id（法人番号）※任意
- effective_date（適用日）※任意

E. スコープ（MVPでの扱い）

- MVP：文書アップロード→キーワード/全文検索→該当箇所を引用表示
- Phase2：埋め込み検索（ベクタ）＋“引用があるときだけ答える”ガードを強化


## 5. コンセプト

**『締めの不安を、週1回の確認だけで済む状態にする。』**

（詳細は 1.1 コンセプト 参照）
価値提案：
1.  **Zero Input**: 自動連携による台帳構築
2.  **Zero Search**: RAGによる根拠の即時提示
3.  **Actionable**: LLMによる次アクションの明確化

## 6. ユーザーフロー

| ステップ        | ユーザー行動                                                         |
| --------------- | -------------------------------------------------------------------- |
| F0 初回         | デモデータで試す → 画面の意味が分かる → 自社データを入れてみたくなる |
| F1 データ取込   | CSVアップロード（またはURL指定）→ 検証（行数・必須列）→ 取込完了     |
| F2 受注台帳     | 受注一覧 → フィルタ（期限/金額/機関）→ 受注詳細                      |
| F3 請求・入金   | 受注→請求生成（自動/手動）→ 入金記録 → 未回収アラート                |
| F4 週次レポート | 例外一覧（未請求/期限超過）→ 1クリックで“週報”生成 → 共有            |

## 7. 画面仕様（MVP）

S1 ホーム（ダッシュボード）

- 今月の受注額/請求額/入金額/未回収額
- 未回収アラート（期限超過TOP10）
- 例外サマリ（未請求・金額差異・締め未完了）

S2 受注台帳（一覧）

- フィルタ：発注機関/カテゴリ/金額帯/期限超過
- 行：案件名、受注日、受注額、ステータス、支払期日

S3 受注詳細

- 元データ（落札実績）と派生情報（請求/入金）を同一画面に表示
- 根拠：生成SQL（読み取り）を表示
- （任意/RAG）関連文書の一覧（契約/発注書/社内ルール等）と、該当箇所の引用表示

S4 請求・入金（管理）

- ステータス：未請求/請求済/一部入金/入金済/期限超過
- 入金記録（デモは手動入力 or 生成データ）

S5 週次レポート

- 要点3つ + 次アクション
- 共有用リンク/ダウンロード

S6 設定

- データソース設定（デモ/自社CSV）
- 支払条件デフォルト
- 通知（メール/Slack）※MVPは表示のみ

S7 文書（任意/RAG）

- PDF/テキストのアップロード
- 文書一覧（種別・取引先・関連案件）
- 検索（キーワード/全文検索、任意でベクタ検索）

## 8.
 機能要件

**8.1 データ取り込み**

- 落札実績CSV（全件/差分）を取り込み、重複排除（案件番号＋落札決定日）
- 法人番号データと結合し、所在地（都道府県）を付与
- 取込検証：行数、必須列、型、欠損率をログに出す

**8.2 変換（dbt）**

- Bronze：raw tables（オープンデータをそのまま）
- Silver：型整形・名寄せ・欠損補完
- Gold：KPI（日次/週次）と例外テーブル（未請求/期限超過/差異）

**8.3 例外検知**

- 未請求：請求日がNULL かつ 受注日からX日経過
- 期限超過：支払期日 < 今日 かつ 入金未完了
- 金額差異：請求額 != 受注額（許容誤差あり）

**8.4 LLM（任意・段階導入）**

- 週次レポートの文章化（要点3つ）
- 案件名（日本語）からカテゴリ推定（例：広報/制作/システム/運用）
- 注意：数値算出はDB側（LLMは要約・分類のみ）

**8.5 RAG（任意・段階導入：非構造化データの活用）**

**8.5 RAG（任意・段階導入：非構造化データの活用）**

狙い：**「確認コスト（Zero Search）」の実現。**
「数字（構造化）」のアラートに対し、「根拠（非構造化文書）」をセットで提示することで、ユーザーがファイルサーバを探し回る時間をゼロにする。

- 対象文書（例）
  - 取引条件・支払条件が書かれたPDF（契約書/発注書/見積/請求書控え）
  - 社内ルール（請求締め日、検収条件、督促ルール）
  - 公開資料（例：調達ポータルのオープンデータ仕様PDF、統計の定義資料）
- できること（MVP+）
  - 受注詳細画面で「この案件の支払条件は？」等に対し、該当箇所を引用して回答
  - 例外（期限超過）の原因候補を、文書から補助的に提示（例：検収条件/支払サイト）
- 実装方針（低コスト）
  - 文書をチャンク化して保存し、検索（まずはキーワード/全文検索、余力があれば埋め込み検索）
  - 回答には必ず『引用（文書名・ページ・抜粋）』を添付し、見つからない場合は「不明」と返す


## 9. データモデル（DuckDB + dbt）

主テーブル（例）

- bronze_bids：落札実績raw
- bronze_corporate：法人番号raw
- silver_bids_clean：型整形、キー正規化
- silver_vendor_enriched：落札企業名＋法人番号＋都道府県
- gold_orders：受注台帳（案件単位）
- gold_invoices：請求（デモ生成）
- gold_payments：入金（デモ生成/手動）
- gold_exceptions：例外一覧（未請求/期限超過/差異）
- gold_kpi_weekly：週次KPI
- （任意/RAG）docs_documents：文書メタ（文書ID、種別、関連案件、更新日など）
- （任意/RAG）docs_chunks：文書チャンク（doc_id、chunk_id、text、page、位置情報）
- （任意/RAG）docs_index：検索用（全文検索インデックス、任意でembedding）

dbt tests（最低限）

- unique / not_null：案件キー、法人番号
- accepted_values：ステータス
- relationships：法人番号結合

## 10. バッチ/運用

**10.1 GitHub Actions（日次ETLジョブ）**

毎朝9時（JST）に実行し、データ取得から変換、デプロイまでを一気通貫で行う。
ストリーミング（リアルタイム）ではなく、**「信頼できる静的スナップショット」を毎日更新してDeplopyする**アーキテクチャを採用（コストゼロ、運用負荷最小）。

- **スケジュール**: `cron: "0 0 * * *"` (09:00 JST)
- **権限**: `contents: write` (生成されたDuckDBとdbt成果物をリポジトリにPushするため)

**ワークフロー定義 (`.github/workflows/daily_refresh.yml`)**

1.  **Extract (データ取得)**
    - `python pipelines/fetch_bids.py --mode delta --out data/`
    - 調達ポータルから差分（または全件）を取得し、`data/` に保存。

2.  **Load (DuckDB更新)**
    - `python pipelines/update_warehouse.py --db warehouse.duckdb --data-dir data/`
    - 取得したCSVをDuckDBの `bronze` スキーマにロード。ユニークキー（案件番号＋決定日）で重複排除し、`warehouse.duckdb` を更新。

3.  **Transform & Test (dbt)**
    - `dbt run`: bronze → silver → gold のモデル変換。
    - `dbt test`: データの整合性（ユニーク制約、参照整合性など）を検証。**ここが失敗したらコミットせずに停止する（壊れたデータを配信しない）。**

4.  **Export (Gold → JSON)**
    - `python pipelines/export_json.py --tables gold_ledger,gold_exceptions,gold_invoices,gold_payments --out web/src/lib/`
    - dbt変換後のGoldテーブルをJSONファイルとしてエクスポート。これにより、Next.js（Vercel）が静的インポートで最新データを読み込める。

5.  **Deploy (Artifact Commit)**
    - 更新された `web/src/lib/*.json`（データ）、`dbt/target/`（ドキュメント用）をGitにコミット＆プッシュ。
    - Vercelはリポジトリ変更を検知して自動で再ビルドし、最新のJSONデータでアプリを配信。
    - ※ `warehouse.duckdb` は開発・分析用にローカル保持。大きくなる場合は `.gitignore` に追加。

## 11. 非機能要件

- 再現性：ローカルで `make run` 相当で起動できる
- 観測性：実行ログ（取得件数、変換件数、例外件数）が残る
- 安全性：アプリは読み取り中心（DB書き込みはデモ範囲に限定）

## 12. 受託につなぐためのデモ設計

- “丸投げ”の安心材料を前に出す
  - 仕様（何を自動化するか）が明確
  - 失敗時の扱い（ログ/原因）が明確
  - 置き換え後の運用（週1回の確認）が明確
- 30秒デモ台本
  - ① ホームで今月の未回収を確認
  - ② 期限超過の一覧→詳細
  - ③ 週次レポート生成（要点3つ）

## 13. 受け入れ基準（MVP完了条件）

- デモデータ（落札実績）を取り込み、台帳（gold_orders）が生成できる
- 例外（未請求/期限超過/差異）が1画面で確認できる
- 請求・入金のステータスが計算でき、期限超過が抽出できる
- 週次レポート（要点3つ＋例外表）が生成できる
- dbt testsがCIで通り、失敗時に原因が分かるログが残る

（任意/RAG）

- PDF/テキストを投入し、受注詳細から関連文書を参照できる
- 文書検索→引用付き回答ができ、引用が取れない場合は「不明」と返す


## 付録A：生成PDFテンプレ（本文案）

> 注意：以下は **デモ用に作成**するテンプレです。実在の社名・個人名・住所・口座情報などは一切入れず、架空の情報（例：株式会社サンプル）を使う。
> すべてのPDFの1ページ目ヘッダに「**DEMO / 学習・検証用（実取引ではない）**」を明記する。

### A1. 取引基本契約（テンプレ）doc_type=contract

**1枚目（要点を1ページに集約）**

- タイトル：取引基本契約書（デモ用）
- 当事者：
  - 甲：株式会社サンプル（発注者）
  - 乙：株式会社デモ制作（受注者）
- 契約開始日：YYYY-MM-DD
- 契約の目的：業務委託（制作/運用/開発 等）

**支払条件（RAGの主戦場）**

- 請求締め日：毎月末日
- 請求書発行日：締め日から5営業日以内
- 支払期日：請求書発行日の翌月末日（Net 30相当でも可）
- 支払方法：銀行振込
- 振込手数料：甲負担／乙負担（どちらか明記）

**検収条件**

- 検収対象：納品物一式
- 検収期間：納品日から10営業日
- 検収完了：甲の書面/メール承認、または期間内に異議がない場合

**遅延時の扱い**

- 遅延損害金：年率◯%（例：14.6%）
- 期限超過時の督促：乙は支払期日翌営業日に通知

**契約変更・個別契約**

- 個別契約（発注書）優先の有無
- 変更は書面（メール含む）合意

**RAG想定Q（契約）**

- 「支払期日はいつ？」
- 「請求締め日は？」
- 「検収は必要？検収期間は？」
- 「支払遅延時の扱いは？」

---

### A2. 発注書（PO）テンプレ doc_type=po

**1ページ目（案件に紐づくキーを明確に）**

- タイトル：発注書（デモ用）
- 発注番号：PO-YYYYMM-0001
- 関連案件キー：ORDER-YYYYMM-XXXX（システム側のキーと一致させる）
- 発注日：YYYY-MM-DD
- 発注者：株式会社サンプル
- 受注者：株式会社デモ制作
- 件名：◯◯制作/運用支援（案件名は落札実績の案件名と近い文字列にするとデモが強い）

**条件**

- 金額（税別/税込）：¥X,XXX,XXX
- 納期：YYYY-MM-DD
- 納品物：箇条書き（3点まで）
- 検収条件：契約に準ずる／本発注書で個別指定（どちらか）
- 支払条件：契約に準ずる／個別指定（どちらか）

**RAG想定Q（発注書）**

- 「この案件の納期は？」
- 「金額はいくら？」
- 「納品物は何？」
- 「支払条件は契約準拠？個別指定？」

---

### A3. 請求書（Invoice）テンプレ doc_type=invoice

**1ページ目**

- タイトル：請求書（デモ用）
- 請求番号：INV-YYYYMM-0001
- 関連案件キー：ORDER-YYYYMM-XXXX
- 請求日：YYYY-MM-DD
- 支払期日：YYYY-MM-DD（契約条件と整合させる）
- 請求先：株式会社サンプル 御中
- 発行者：株式会社デモ制作

**内訳（RAGで“根拠”にしやすい）**

- 項目A：◯◯制作費　数量1　単価¥X　金額¥X
- 項目B：運用費（◯月分）　数量1　単価¥X　金額¥X
- 小計/消費税/合計

**振込先（ダミー）**

- 銀行名：デモ銀行
- 支店：サンプル支店
- 口座種別：普通
- 口座番号：0000000
- 口座名義：カ）デモセイサク

**RAG想定Q（請求書）**

- 「支払期日は？」
- 「請求金額の内訳は？」
- 「請求番号は？」

---

### A4. 社内ルール（締め・督促）テンプレ doc_type=policy

**1ページ目（必ず“誰が/いつ/何をするか”）**

- タイトル：請求・入金管理ルール（デモ用）
- 適用範囲：全案件

**締めの手順**

- 毎週月曜 10:00：例外一覧を確認（未請求/期限超過/差異）
- 月末：請求対象確定（検収済み案件のみ）
- 翌月5営業日以内：請求書送付

**督促フロー**

- 支払期日＋1営業日：一次督促（メール）
- 支払期日＋7日：二次督促（電話/書面）
- 支払期日＋14日：経営者エスカレーション（停止判断）

**例外時の判断基準**

- 検収未了：督促ではなく検収依頼を優先
- 請求差異：請求書再発行 or 見積差分の確認

**RAG想定Q（ルール）**

- 「期限超過になったら次に何をする？」
- 「一次督促はいつ？」
- 「検収未了のときは督促する？」

---

## 付録B：RAG質問例（FAQセット）

> 目的：デモで“検索→引用→回答”が一目で分かる、短い質問を用意する。

### B1. 受注詳細（案件単位）で聞く

- 「この案件の支払期日は？（根拠：請求書 or 契約）」
- 「検収が必要？検収期間は？（根拠：契約）」
- 「納期はいつ？（根拠：発注書）」
- 「請求金額の内訳を教えて（根拠：請求書）」

### B2. 例外（期限超過）から聞く

- 「この期限超過、次に誰が何をする？（根拠：社内ルール）」
- 「督促はどのタイミングで？（根拠：社内ルール）」
- 「検収未了の場合の扱いは？（根拠：社内ルール＋契約）」

### B3. データ定義（メタデータ）として聞く

- 「府省コードって何？（根拠：ファイル仕様PDF）」
- 「落札価格の単位は？（根拠：ファイル仕様PDF）」
- 「差分データの重複判定は何でやる？（根拠：仕様PDF＋実装ルール）」

---

## 付録C：引用ポリシー（RAGの安全柵）

- 回答は必ず **引用を添付**する（文書名/ページ/抜粋）。
- 引用が取れない場合は、推測せずに **「不明（文書に記載なし）」** と返す。
- 数値計算（受注額/未回収額等）はDB側で行い、LLMは文章化・分類・根拠提示に限定。
- 1つの回答で引用は最大2〜3箇所まで（読みやすさ優先）。

**引用フォーマット（表示例）**

- 根拠：『請求書（INV-202512-0001） p.1』より「支払期日：2026-01-31」

---

## 付録D：文書テンプレとデータ紐付け（最小ルール）

- related_order_key：ORDER-YYYYMM-XXXX を、
  - 受注台帳（gold_orders）
  - 発注書（PO）
  - 請求書（Invoice）
 で共通に持たせる。

- doc_typeは以下の固定値を使う：contract / po / invoice / policy / spec / manual

- 文書登録時の必須メタ：doc_id, doc_type, title, created_at

- 任意メタ：related_order_key, vendor_name, vendor_id（法人番号）, effective_date

---

## 付録E：リポジトリ構成案

- repo/
- data/              # ダウンロードしたzipやサンプル（gitignore前提）
- seeds/             # 小さめサンプルCSV（デモ用）
- warehouse.duckdb
- dbt/               # dbt project
- app/               # Streamlit
- pipelines/         # 取得・生成スクリプト
- .github/workflows/ # scheduled runs
- README.md


- repo/
- data/              # ダウンロードしたzipやサンプル（gitignore前提）
- seeds/             # 小さめサンプルCSV（デモ用）
- warehouse.duckdb
- dbt/               # dbt project
- app/               # Streamlit
- pipelines/         # 取得・生成スクリプト
- .github/workflows/ # scheduled runs
- README.md


## 13. デモ台本（2分バージョン）

**目的：自動化×知能化の価値を一連のフローで体感させる**

### ① 自動更新の確認（0:00-0:20）
- **画面**: GitHub Actions ログ画面（またはダッシュボード）
- **Action**: 「今朝9時の実行ログを見てみましょう」と言ってログを見せる。
- **Talk**: 「このプロダクトは、毎朝9時に国の調達ポータルから最新データを自動取得し、台帳を更新しています。入力の手間はゼロです。」

### ② 例外検知とドリルダウン（0:20-0:50）
- **画面**: ホーム（ダッシュボード）→ 受注詳細
- **Action**: 「要対応」のアラート（期限超過）をクリックし、詳細画面へ飛ぶ。
- **Talk**: 「ログインすると、対応が必要な案件だけがハイライトされています。例えばこの案件、支払期限を過ぎていますが未入金です。」

### ③ RAGによる根拠確認（0:50-1:20）
- **画面**: 受注詳細（RAGチャット枠）
- **Action**: 「この案件の支払条件は？」等の質問ボタンを押す。
- **Talk**: 「通常なら契約書を探しますが、ここではAIに聞くだけです。『月末締め翌月末払い』と、契約書の第2条を引用して即答してくれます。根拠がその場で分かります。」

### ④ LLMエージェントによるアクション生成（1:20-1:50）
- **画面**: 週次レポート生成画面
- **Action**: 「週次レポート生成」ボタンを押す。
- **Talk**: 「状況が分かったら、次は行動です。AIが『督促メールを送るべき』『文面案はこちら』と、具体的な次アクションまで提案してくれます。」
- **Talk**: 「これが、『台帳を守る』だけでなく『台帳が回る』新しい管理の形です。」


